<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="js/jquery-2.2.3.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="https://cdn.rawgit.com/zenorocha/clipboard.js/master/dist/clipboard.min.js"></script> <!--Clipboard.js для копирования в буфер-->
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/bootstrap-theme.min.css" rel="stylesheet">
<link href="css/styles.css" rel="stylesheet">
<link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
<title>Link converter</title>

<script language="javascript">
    function convertName() {
        var blockstr=document.getElementById('blockstr').value; // получаем данные из формы, заблокированная строка
        document.getElementById('out1').innerHTML =  blockstr.replace( /-/g, " " )+" site: aliexpress.com";
}

    function convertFullLink() {
        var fullLink=document.getElementById('fullLink').value; 
        console.log(fullLink.length); 
        var from = fullLink.search('item%2F'); 
        var to = fullLink.length;
        var newstr = fullLink.substring(from,to);
        console.log(newstr.length); 
        // document.getElementById('out2').innerHTML =  newstr;
       
        newstr = newstr.slice(7); //отрезать первые 7 символов
        console.log(newstr.length); 
        // document.getElementById('out2').innerHTML =  newstr;

        newstr = newstr.split('%2F')[0]; //удалить все после определенного символа
        console.log(newstr.length); 
        newstr = newstr.replace(/-/g, " ") + " site: aliexpress.com";
        document.getElementById('out2').innerHTML =  newstr;
}

</script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter47196225 = new Ya.Metrika({
                    id:47196225,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    webvisor:true
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/47196225" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

</head>

<body>
    <div class="container">
      <div class="row">
        <div class="col-sm-8 col-md-offset-2">
            <header>
                <h1 title="special for /cyclecult ;)">Очиститель ссылок</h1>
                <p>
                    На входе реферальная ссылка на товар с паблика /cyclecult, пойманная расширением для хрома uBlock. <a href="https://snag.gy/YtrGUw.jpg" target="_blank">Скриншот</a><br/>
                    На выходе запрос с параметром для поиска на aliexpress.
                </p>
            </header>
            <div class="converter1">
                <form>
                    <h4>1. %2Fназвание%2F, пример:</h4>
                    <p class="code">9-16-BMX-Ultralight-Bicycle-Pedals-Aluminum-Alloy-3-Colors-Mountain-MTB-Bike-Pedals-Fixie-Road</p>
                    <input id="blockstr" type="text"> <br> 
                </form>
                <button type="button" class="btn btn-warning" onclick="convertName()">Очистить</button>
                <div id="out1"></div>
                <button class="btn btn-clipboard btn-info" data-clipboard-target="#out1">Скопировать в буфер обмена</button>
                <script>
                new Clipboard('.btn-clipboard'); // библиотека
                </script>
                </div>

            <div class="converter2">
                <form>
                    <h4>2. Полная ссылка, пример:</h4>
                    <p class="code">
                     http://s.click.aliexpress.com/deep_link.htm?aff_short_key=jqf2Rf6&af=564857&cv=25781683&cn=42p0nva6wgn6hhu2ckgp9yz956km00np&dp=v5_42p0nva6wgn6hhu2ckgp9yz956km00np&mall_affr=pr1&dl_target_url=https%3A%2F%2Fru.aliexpress.com%2Fitem%2F9-16-BMX-Ultralight-Bicycle-Pedals-Aluminum-Alloy-3-Colors-Mountain-MTB-Bike-Pedals-Fixie-Road%2F32512024298.html%3Fspm%3Da2g0s.13010208.99999999.273.POuuTV%26af%3D564857%26cv%3D25781683%26cn%3D42p0nva6wgn6hhu2ckgp9yz956km00np%26dp%3Dv5_42p0nva6wgn6hhu2ckgp9yz956km00np%26mall_affr%3Dpr1&afref=
                    </p>
                    <input id="fullLink" type="text"> <br> 
                </form>
                <button type="button" class="btn btn-warning" onclick="convertFullLink()">Очистить полную ссылку</button>
                <div id="out2" class="code"></div>
                <button class="btn btn-clipboard btn-info" data-clipboard-target="#out2">Скопировать в буфер обмена</button>
                <script>
                new Clipboard('.btn-clipboard'); 
                </script>
                </div>
        </div>
      </div>
    <footer>
        Copyright &copy; 2017  <a href="../../index.html" target="_blank" title="Перейти на страницу портфолио">Nadezhda Dyakova aka LadyVamp</a><br>
    </footer>

</div>
</body>